<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livsstil och H√§lsa - Interaktiv Studiehandledning</title>
    <link rel="stylesheet" href="https://johanstromquist.github.io/styles/studyguide.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Livsstil och H√§lsa</h1>
            <p>En interaktiv studiehandledning f√∂r Naturkunskap 1b</p>
        </header>
        
        <nav>
            <ul>
                <li><a href="#" class="active" data-section="intro">Introduktion</a></li>
                <li><a href="#" data-section="vetenskap">4.1 Vetenskap om h√§lsa</a></li>
                <li><a href="#" data-section="psykisk">4.2 Psykisk h√§lsa och stress</a></li>
                <li><a href="#" data-section="somn">4.3 S√∂mn</a></li>
                <li><a href="#" data-section="fysisk">4.4 Fysisk aktivitet</a></li>
                <li><a href="#" data-section="droger">4.5 Droger</a></li>
                <li><a href="#" data-section="quiz">Quiz</a></li>
            </ul>
        </nav>
        
        <!-- Introduktion -->
        <section id="intro" class="section active animated">
            <h2>V√§lkommen till din interaktiva studiehandledning!</h2>
            <p>Denna guide hj√§lper dig att f√∂rbereda dig inf√∂r provet i Naturkunskap 1b, moment 3 om livsstil och h√§lsa. Guiden √§r uppdelad i 5 huvuddelar som motsvarar kursens delar.</p>
            
            <div class="info-box">
                <h3>üìù S√• anv√§nder du studiehandledningen</h3>
                <p>Navigera mellan olika avsnitt genom menyn ovan. Varje avsnitt inneh√•ller:</p>
                <ul>
                    <li>Viktiga begrepp och definitioner</li>
                    <li>F√∂rklaringar med visuella hj√§lpmedel</li>
                    <li>√ñvningsfr√•gor i slutet av varje avsnitt</li>
                </ul>
                <p>N√§r du k√§nner dig redo, testa dina kunskaper med det interaktiva quizet!</p>
            </div>
            
            <div class="flex-container">
                <div class="card">
                    <h3>üèÜ Prestationer att l√•sa upp</h3>
                    <p>N√§r du anv√§nder studiehandledningen kan du l√•sa upp prestationer:</p>
                    <ul>
                        <li>Kunskapss√∂karen - Bes√∂k alla avsnitt</li>
                        <li>Quizm√§staren - F√• 100% r√§tt p√• quizet</li>
                        <li>Snabbt√§nkaren - Slutf√∂r quizet p√• under 3 minuter</li>
                        <li>Blixten - Slutf√∂r quizet p√• under 2 minuter</li>
                        <li>Ljusets hastighet - Slutf√∂r quizet p√• under 1 minut</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>üìä Sp√•ra dina framsteg</h3>
                    <p>Dina resultat och prestationer sparas automatiskt s√• att du kan se din utveckling √∂ver tid. F√∂rs√∂k att f√∂rb√§ttra dina tider och resultat f√∂r varje f√∂rs√∂k!</p>
                    <p>Ditt b√§sta resultat hittills:</p>
                    <div id="best-time" class="time-record">Inte satt √§n</div>
                    <div class="achievement-tier">
                        <div class="tier tier-1">3 min</div>
                        <div class="tier tier-2">2 min</div>
                        <div class="tier tier-3">1 min</div>
                    </div>
                </div>
            </div>
            
            <button onclick="document.querySelector('[data-section=\'vetenskap\']').click()">B√∂rja studera nu!</button>
            
            <div class="achievements">
                <div class="achievement" id="explorer" data-name="Kunskapss√∂karen">
                    <div class="achievement-icon">üß≠</div>
                    <h3>Kunskapss√∂karen</h3>
                    <p>Bes√∂k alla avsnitt i studiehandledningen</p>
                    <div class="locked-overlay">üîí</div>
                </div>
                <div class="achievement" id="quiz-master" data-name="Quizm√§staren">
                    <div class="achievement-icon">üèÜ</div>
                    <h3>Quizm√§staren</h3>
                    <p>F√• 100% r√§tt p√• quizet</p>
                    <div class="locked-overlay">üîí</div>
                </div>
                <div class="achievement" id="speed-demon" data-name="Snabbt√§nkaren">
                    <div class="achievement-icon">‚ö°</div>
                    <h3>Snabbt√§nkaren</h3>
                    <p>Slutf√∂r quizet p√• under 3 minuter</p>
                    <div class="locked-overlay">üîí</div>
                </div>
                <div class="achievement" id="lightning" data-name="Blixten">
                    <div class="achievement-icon">‚ö°‚ö°</div>
                    <h3>Blixten</h3>
                    <p>Slutf√∂r quizet p√• under 2 minuter</p>
                    <div class="locked-overlay">üîí</div>
                </div>
                <div class="achievement" id="light-speed" data-name="Ljusets hastighet">
                    <div class="achievement-icon">üöÄ</div>
                    <h3>Ljusets hastighet</h3>
                    <p>Slutf√∂r quizet p√• under 1 minut</p>
                    <div class="locked-overlay">üîí</div>
                </div>
            </div>
        </section>
        
        <!-- 4.1 Vetenskap om h√§lsa -->
        <section id="vetenskap" class="section animated">
            <h2>4.1 Vetenskap om h√§lsa</h2>
            
            <div class="definition">
                <h3>Livsstil</h3>
                <p>Livsstil omfattar de vanor och val vi g√∂r i vardagen. Det √§r s√•dant vi sj√§lva har m√∂jlighet att f√∂r√§ndra och v√§lja. Exempelvis v√•ra mat- och motionsvanor, s√∂mnrutiner, och v√•rt f√∂rh√•llningss√§tt till stress.</p>
            </div>
            
            <h3>Livsstilsfaktorer som p√•verkar h√§lsan</h3>
            <div class="flex-container">
                <div class="card">
                    <h4>üç∑ Alkohol och droger</h4>
                    <p>Anv√§ndning av alkohol och andra droger p√•verkar b√•de fysisk och psykisk h√§lsa negativt.</p>
                </div>
                <div class="card">
                    <h4>üö¨ R√∂kning</h4>
                    <p>Tobaksr√∂kning skadar lungorna och √∂kar risken f√∂r flera allvarliga sjukdomar.</p>
                </div>
                <div class="card">
                    <h4>üèÉ‚Äç‚ôÄÔ∏è Fysisk aktivitet</h4>
                    <p>Regelbunden motion st√§rker kroppen och f√∂rb√§ttrar psykiskt v√§lbefinnande.</p>
                </div>
                <div class="card">
                    <h4>üçé N√§ringsintag och dieter</h4>
                    <p>Vad vi √§ter p√•verkar v√•r energi, v√•rt hum√∂r och v√•r l√•ngsiktiga h√§lsa.</p>
                </div>
                <div class="card">
                    <h4>üò¥ S√∂mn</h4>
                    <p>Tillr√§cklig och kvalitativ s√∂mn √§r avg√∂rande f√∂r b√•de fysisk och mental √•terh√§mtning.</p>
                </div>
                <div class="card">
                    <h4>üò∞ Stress</h4>
                    <p>Kronisk stress p√•verkar b√•de fysiska och mentala funktioner negativt.</p>
                </div>
            </div>
            
            <!-- √ñvningsfr√•gor f√∂r detta avsnitt -->
            <h3>√ñvningsfr√•gor - Vetenskap om h√§lsa</h3>
            <div id="vetenskap-questions"></div>
            
            <button onclick="document.querySelector('[data-section=\'psykisk\']').click()">G√• vidare till n√§sta avsnitt</button>
        </section>
        
        <!-- 4.2 Psykisk h√§lsa och stress -->
        <section id="psykisk" class="section animated">
            <h2>4.2 Psykisk h√§lsa och stress</h2>
            
            <div class="definition">
                <h3>Psykisk h√§lsa</h3>
                <p>God psykisk h√§lsa k√§nnetecknas av:</p>
                <ul>
                    <li>F√∂rm√•gan att hantera livets upp- och nedg√•ngar</li>
                    <li>Att ofta ha en positiv framtidssyn</li>
                    <li>Att k√§nna lust och gl√§dje</li>
                    <li>Att ha goda relationer</li>
                </ul>
            </div>
            
            <!-- √ñvningsfr√•gor f√∂r detta avsnitt -->
            <h3>√ñvningsfr√•gor - Psykisk h√§lsa och stress</h3>
            <div id="psykisk-questions"></div>
            
            <button onclick="document.querySelector('[data-section=\'somn\']').click()">G√• vidare till n√§sta avsnitt</button>
        </section>
        
        <!-- 4.3 S√∂mn -->
        <section id="somn" class="section animated">
            <h2>4.3 S√∂mn</h2>
            
            <div class="definition">
                <h3>S√∂mn</h3>
                <p>S√∂mn utg√∂r en tredjedel av en m√§nniskas liv. Det √§r kroppens viktigaste tid f√∂r tre kritiska processer:</p>
                <ul>
                    <li>√Öterh√§mtning</li>
                    <li>St√§dning av slaggprodukter fr√•n hj√§rnan</li>
                    <li>Bearbeta information och skapa minnen</li>
                </ul>
            </div>
            
            <!-- √ñvningsfr√•gor f√∂r detta avsnitt -->
            <h3>√ñvningsfr√•gor - S√∂mn</h3>
            <div id="somn-questions"></div>
            
            <button onclick="document.querySelector('[data-section=\'fysisk\']').click()">G√• vidare till n√§sta avsnitt</button>
        </section>
        
        <!-- 4.4 Fysisk aktivitet -->
        <section id="fysisk" class="section animated">
            <h2>4.4 Fysisk aktivitet</h2>
            
            <div class="definition">
                <h3>Fysisk aktivitet</h3>
                <p>Kroppsr√∂relse som √∂kar energif√∂rbrukningen ut√∂ver vilof√∂rbrukning. Detta kan vara allt fr√•n vardagsaktiviteter till planerad tr√§ning.</p>
            </div>
            
            <h3>Rekommendationer f√∂r fysisk aktivitet</h3>
            <div class="flex-two-column">
                <div class="column">
                    <h4>Vuxna</h4>
                    <p>Alla typer av fysisk aktivitet √§r gynnsamma, √§ven f√∂r kognitiva f√∂rm√•gor. Mental bearbetningshastighet f√∂rb√§ttras mest med fysisk aktivitet.</p>
                    <p>Rekommendation:</p>
                    <ul>
                        <li>150-300 minuter m√•ttlig intensitet per vecka</li>
                        <li>ELLER 75-150 minuter h√∂g intensitet per vecka</li>
                    </ul>
                </div>
                <div class="column">
                    <h4>Barn och ungdomar</h4>
                    <p>B√∂r vara fysiskt aktiva minst 60 minuter dagligen, med h√∂g intensitet minst tre g√•nger per vecka.</p>
                    
                    <div class="activity-icons">
                        <div class="activity-icon">üèÉ‚Äç‚ôÄÔ∏è</div>
                        <div class="activity-icon">üö¥‚Äç‚ôÇÔ∏è</div>
                        <div class="activity-icon">üèä‚Äç‚ôÄÔ∏è</div>
                        <div class="activity-icon">üèãÔ∏è‚Äç‚ôÄÔ∏è</div>
                        <div class="activity-icon">‚öΩ</div>
                        <div class="activity-icon">üßò‚Äç‚ôÄÔ∏è</div>
                    </div>
                </div>
            </div>
            
            <!-- √ñvningsfr√•gor f√∂r detta avsnitt -->
            <h3>√ñvningsfr√•gor - Fysisk aktivitet</h3>
            <div id="fysisk-questions"></div>
            
            <button onclick="document.querySelector('[data-section=\'droger\']').click()">G√• vidare till n√§sta avsnitt</button>
        </section>
        
        <!-- 4.5 Droger -->
        <section id="droger" class="section animated">
            <h2>4.5 Droger</h2>
            
            <div class="definition">
                <h3>Droger</h3>
                <p>√Ñmnen som p√•verkar det centrala nervsystemet (CNS). De liknar hj√§rnans egna signalsubstanser och binder till receptorer, vilket p√•verkar hj√§rnans funktion. Effekten varierar mellan olika individer eftersom v√•ra hj√§rnor skiljer sig fr√•n varandra.</p>
            </div>
            
            <!-- √ñvningsfr√•gor f√∂r detta avsnitt -->
            <h3>√ñvningsfr√•gor - Droger</h3>
            <div id="droger-questions"></div>
            
            <button onclick="document.querySelector('[data-section=\'quiz\']').click()">G√• vidare till quiz</button>
        </section>
        
        <!-- Quiz -->
        <section id="quiz" class="section animated">
            <h2>Quiz - Testa dina kunskaper</h2>
            
            <div id="quiz-start">
                <div class="info-box">
                    <h3>Dags att testa dina kunskaper!</h3>
                    <p>Detta quiz inneh√•ller slumpm√§ssigt utvalda fr√•gor fr√•n alla avsnitt i studiehandledningen. F√∂rs√∂k att svara s√• snabbt och korrekt som m√∂jligt f√∂r att f√• h√∂gsta po√§ng!</p>
                    <ul>
                        <li>Du f√•r po√§ng f√∂r varje r√§tt svar</li>
                        <li>Ju snabbare du slutf√∂r quizet, desto fler bonuspo√§ng f√•r du</li>
                        <li>Kan du sl√• ditt eget rekord?</li>
                    </ul>
                </div>
                
                <div class="achievement-tier">
                    <div class="tier tier-1">Niv√• 1: Slutf√∂r p√• under 3 minuter</div>
                    <div class="tier tier-2">Niv√• 2: Slutf√∂r p√• under 2 minuter</div>
                    <div class="tier tier-3">Niv√• 3: Slutf√∂r p√• under 1 minut</div>
                </div>
                
                <div id="best-time-display" class="time-record">Ditt snabbaste resultat: Inte satt √§n</div>
                
                <button onclick="startQuiz()">Starta Quiz</button>
            </div>
            
            <div id="quiz-progress" style="display: none;">
                <div class="timer" id="quiz-timer">0:00</div>
                <div class="progress-container">
                    <div class="progress-bar" id="quiz-progress-bar"></div>
                </div>
                <p id="quiz-progress-text">0 av 0 besvarade</p>
            </div>
            
            <div id="quiz-questions" style="display: none;"></div>
            
            <div id="quiz-result" style="display: none;"></div>
            
            <!-- Floating quiz status - visas endast under aktiv quiz -->
            <div id="quiz-status-floating" class="quiz-status-floating" style="display: none;">
                <div class="timer" id="floating-timer">0:00</div>
                <div class="mini-progress">
                    <div class="mini-progress-bar" id="floating-progress-bar"></div>
                </div>
                <div class="status-text" id="floating-status">0/15 besvarade</div>
            </div>
        </section>
    </div>
    
    <script>
        // Databas med fr√•gor f√∂r varje avsnitt
        const questionsDB = {
            vetenskap: [
                {
                    question: "Vad menas med livsstil?",
                    options: [
                        "Enbart genetiska faktorer som p√•verkar h√§lsan",
                        "Vanor och val vi g√∂r i vardagen som vi kan f√∂r√§ndra",
                        "Sjukdomar som √§r direkt ned√§rvda fr√•n v√•ra f√∂r√§ldrar",
                        "Den sociala st√§llning man har i samh√§llet"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Hur definierar WHO h√§lsa?",
                    options: [
                        "Endast fr√•nvaro av sjukdom",
                        "Endast mentalt v√§lbefinnande",
                        "Ett tillst√•nd av fullst√§ndigt fysiskt, mentalt och socialt v√§lbefinnande och inte enbart fr√•nvaro av sjukdom",
                        "Endast god fysik och kondition"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Vilka utmaningar finns med vetenskapliga studier om h√§lsa?",
                    options: [
                        "Det √§r l√§tt att isolera effekten av en enskild faktor",
                        "Alla m√§nniskor reagerar exakt likadant p√• samma √•tg√§rder",
                        "Sj√§lvrapporterad h√§lsa via enk√§ter kan vara subjektiv",
                        "Det finns inga etiska begr√§nsningar f√∂r h√§lsostudier"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Vad k√§nnetecknar bra vetenskapliga studier?",
                    options: [
                        "De √§r sponsrade av f√∂retag med vinstintresse",
                        "De har f√• deltagare f√∂r att kunna kontrollera alla variabler",
                        "De har inga etiska godk√§nnanden",
                        "De √§r reproducerbara och har genomg√•tt expertgranskning"
                    ],
                    correctIndex: 3
                },
                {
                    question: "Vad menas med 'bl√• zoner'?",
                    options: [
                        "Omr√•den med s√§rskilt h√∂g vattenf√∂rbrukning",
                        "Omr√•den i v√§rlden d√§r m√§nniskor m√§tbart lever l√§ngre",
                        "Omr√•den med h√∂g teknologisk utveckling",
                        "Omr√•den med h√∂g f√∂rekomst av depression"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vad √§r 'infodemi'?",
                    options: [
                        "En pandemi som endast p√•verkar hj√§rnfunktionen",
                        "√ñverfl√∂d av information, b√•de korrekt och felaktig, som g√∂r det sv√•rt att hitta tillf√∂rlitliga k√§llor",
                        "En sjukdom som endast sprids via datorer",
                        "Information som endast finns tillg√§nglig f√∂r medicinska experter"
                    ],
                    correctIndex: 1
                }
            ],
            psykisk: [
                {
                    question: "Vad k√§nnetecknar god psykisk h√§lsa?",
                    options: [
                        "Att aldrig k√§nna sig nedst√§md",
                        "F√∂rm√•gan att hantera livets upp- och nedg√•ngar",
                        "Att meditera dagligen",
                        "Att ta antidepressiva mediciner"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vilket system aktiveras vid stress?",
                    options: [
                        "Parasympatiska nervsystemet",
                        "Sympatiska nervsystemet",
                        "Endokrina systemet",
                        "Lymfatiska systemet"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vilken hj√§rnstruktur fungerar som hj√§rnans alarmsystem?",
                    options: [
                        "Frontallob",
                        "Hippocampus",
                        "Amygdala",
                        "Cerebellum"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Vad √§r kortisol?",
                    options: [
                        "En signalsubstans som g√∂r oss glada",
                        "Ett stresshormon som fris√§tts fr√•n binjurarna",
                        "Ett s√∂mnhormon",
                        "En sm√§rtlindrande substans"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vilken del av hj√§rnan utvecklas sist (runt 25-√•rs√•ldern)?",
                    options: [
                        "Frontalloben",
                        "Amygdala",
                        "Lillhj√§rnan",
                        "Hj√§rnstammen"
                    ],
                    correctIndex: 0
                },
                {
                    question: "Vad √§r en panikattack?",
                    options: [
                        "Ett livshotande tillst√•nd d√§r hj√§rtat stannar",
                        "En mild form av nedst√§mdhet",
                        "Den mest intensiva formen av √•ngest med stark obehagsk√§nsla",
                        "En l√•ngvarig depression"
                    ],
                    correctIndex: 2
                }
            ],
            somn: [
                {
                    question: "Vilka √§r de tre huvudtyperna av s√∂mn?",
                    options: [
                        "L√§tt s√∂mn, djup s√∂mn och komat√∂s s√∂mn",
                        "Dr√∂ms√∂mn (REM), bass√∂mn och djups√∂mn",
                        "Aktiv s√∂mn, passiv s√∂mn och halvvaken s√∂mn",
                        "Alfa-s√∂mn, beta-s√∂mn och delta-s√∂mn"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vad √§r melatonin?",
                    options: [
                        "Ett stresshormon",
                        "Ett s√∂mnhormon som produceras i tallkottk√∂rteln",
                        "Ett hum√∂rh√∂jande hormon",
                        "Ett sm√§rtlindrande hormon"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vilken faktor √§r viktigast f√∂r att st√§lla in v√•r biologiska klocka?",
                    options: [
                        "M√•nen",
                        "Temperatur",
                        "Solljus",
                        "Magnetf√§lt"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Vilken process sker i hj√§rnan under s√∂mn som √§r viktigt f√∂r att f√∂rhindra neurodegenerativa sjukdomar?",
                    options: [
                        "Produktion av stresshormoner",
                        "Minskning av hj√§rnvolymen",
                        "Reng√∂ring genom √∂kat fl√∂de av cerebrospinalv√§tska",
                        "F√∂rst√§rkning av nervkopplingar"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Hur p√•verkar bl√•tt ljus fr√•n sk√§rmar s√∂mnen?",
                    options: [
                        "Det har ingen p√•verkan p√• s√∂mnen",
                        "Det √∂kar melatoninproduktionen",
                        "Det h√§mmar melatoninproduktionen",
                        "Det √∂kar produktionen av serotonin"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Hur m√•nga timmars s√∂mn rekommenderas f√∂r ton√•ringar (13-18 √•r)?",
                    options: [
                        "6 timmar",
                        "7 timmar",
                        "8 timmar",
                        "9 timmar"
                    ],
                    correctIndex: 3
                }
            ],
            fysisk: [
                {
                    question: "Hur definieras fysisk aktivitet?",
                    options: [
                        "Endast planerad tr√§ning p√• gym",
                        "Endast aktivitet som g√∂rs under minst 30 minuter",
                        "Kroppsr√∂relse som √∂kar energif√∂rbrukningen ut√∂ver vilof√∂rbrukning",
                        "Endast aktivitet som g√∂r dig andf√•dd"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Hur mycket m√•ttlig fysisk aktivitet rekommenderas f√∂r vuxna per vecka?",
                    options: [
                        "30-60 minuter",
                        "75-150 minuter",
                        "150-300 minuter",
                        "300-450 minuter"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Hur mycket fysisk aktivitet rekommenderas f√∂r barn och ungdomar dagligen?",
                    options: [
                        "15 minuter",
                        "30 minuter",
                        "45 minuter",
                        "60 minuter"
                    ],
                    correctIndex: 3
                },
                {
                    question: "Vilken kognitiv f√∂rm√•ga f√∂rb√§ttras mest av fysisk aktivitet?",
                    options: [
                        "L√•ngtidsminne",
                        "Mental bearbetningshastighet",
                        "Spr√•kf√∂rm√•ga",
                        "Matematisk f√∂rm√•ga"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vilken hj√§rnstruktur kan √∂ka i volym hos fysiskt aktiva personer?",
                    options: [
                        "Amygdala",
                        "Hippocampus",
                        "Tallkottk√∂rtel",
                        "Lillhj√§rnan"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vilken av f√∂ljande √§r INTE en dokumenterad h√§lsof√∂rdel med fysisk aktivitet?",
                    options: [
                        "F√∂rb√§ttrad kondition",
                        "Starkare skelett",
                        "B√§ttre minne och koncentration",
                        "√ñkad risk f√∂r hj√§rt-k√§rlsjukdomar"
                    ],
                    correctIndex: 3
                }
            ],
            droger: [
                {
                    question: "Vad √§r droger?",
                    options: [
                        "Endast olagliga substanser",
                        "Endast receptbelagda l√§kemedel",
                        "√Ñmnen som p√•verkar det centrala nervsystemet",
                        "Endast substanser som injiceras"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Vad menas med toleransutveckling?",
                    options: [
                        "Att kroppen l√§ker snabbare efter droganv√§ndning",
                        "Att en st√∂rre m√§ngd av drogen beh√∂vs f√∂r att uppn√• samma effekt",
                        "Att anv√§ndaren blir mer social av drogen",
                        "Att drogen inte l√§ngre kan tas in i kroppen"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vilken del av hj√§rnan √§r central f√∂r drogers bel√∂nande effekter?",
                    options: [
                        "Amygdala",
                        "Frontalloben",
                        "Bel√∂ningssystemet",
                        "Lillhj√§rnan"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Vilken av f√∂ljande √§r en centralstimulerande drog?",
                    options: [
                        "Alkohol",
                        "Heroin",
                        "Nikotin",
                        "GHB"
                    ],
                    correctIndex: 2
                },
                {
                    question: "Vad √§r abstinens?",
                    options: [
                        "N√§r man tar en st√∂rre dos √§n vanligt",
                        "Obehag som uppst√•r n√§r man slutar ta en drog",
                        "K√§nslan av v√§lbehag n√§r droger tas",
                        "N√§r man blandar olika droger"
                    ],
                    correctIndex: 1
                },
                {
                    question: "Vad √§r en konsekvens av nikotinanv√§ndning?",
                    options: [
                        "Minskad risk f√∂r hj√§rt-k√§rlsjukdomar",
                        "F√∂rb√§ttrad lungfunktion",
                        "√ñkad risk f√∂r hj√§rt-k√§rlsjukdomar",
                        "B√§ttre s√∂mn"
                    ],
                    correctIndex: 2
                }
            ]
        };
        
        // Globala variabler f√∂r quiz
        let quizQuestions = [];
        let quizAnswers = {};
        let quizStartTime = null;
        let quizInProgress = false;
        let quizTimerInterval = null;
        
        // Lagra och visa b√§sta tider
        let bestTime = localStorage.getItem('quizBestTime') ? parseInt(localStorage.getItem('quizBestTime')) : null;
        
        // Uppdatera b√§sta tid-visningen
        function updateBestTimeDisplay() {
            const bestTimeElem = document.getElementById('best-time');
            const bestTimeDisplayElem = document.getElementById('best-time-display');
            
            if (bestTime) {
                const minutes = Math.floor(bestTime / 60);
                const seconds = bestTime % 60;
                const timeString = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                if (bestTimeElem) bestTimeElem.textContent = timeString;
                if (bestTimeDisplayElem) bestTimeDisplayElem.textContent = `Ditt snabbaste resultat: ${timeString}`;
            } else {
                if (bestTimeElem) bestTimeElem.textContent = "Inte satt √§n";
                if (bestTimeDisplayElem) bestTimeDisplayElem.textContent = "Ditt snabbaste resultat: Inte satt √§n";
            }
        }
        
        // Funktion f√∂r att visa sektionsfr√•gor
        function renderSectionQuestions(section) {
            if (!questionsDB[section]) return '';
            
            let html = '';
            
            questionsDB[section].forEach((q, i) => {
                html += `
                    <div class="question">
                        <h4>${i + 1}. ${q.question}</h4>
                        <div class="options">
                            ${q.options.map((option, j) => `
                                <div class="option" onclick="selectSectionAnswer('${section}', ${i}, ${j}, ${j === q.correctIndex})">
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            return html;
        }
        
        // Funktion f√∂r att v√§lja svar p√• sektionsfr√•gor
        function selectSectionAnswer(section, questionIndex, optionIndex, isCorrect) {
            const options = document.querySelectorAll(`.question:nth-child(${questionIndex + 1}) .option`);
            
            options.forEach((option, index) => {
                option.classList.remove('selected', 'correct', 'wrong');
                
                if (index === optionIndex) {
                    option.classList.add('selected');
                    option.classList.add(isCorrect ? 'correct' : 'wrong');
                } else if (index === questionsDB[section][questionIndex].correctIndex && !isCorrect) {
                    option.classList.add('correct');
                }
            });
        }
        
        // Funktion f√∂r att h√§mta slumpm√§ssiga fr√•gor
        function getRandomQuestions(count = 15) {
            const allQuestions = [];
            
            // Combine all sections' questions
            Object.keys(questionsDB).forEach(section => {
                questionsDB[section].forEach(q => {
                    allQuestions.push({...q, section});
                });
            });
            
            // Shuffle questions
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            
            // Return the specified count
            return shuffled.slice(0, count);
        }
        
        // Funktion f√∂r att starta quiz
        function startQuiz() {
            // Reset quiz variables
            quizQuestions = getRandomQuestions(15);
            quizAnswers = {};
            quizStartTime = new Date().getTime();
            quizInProgress = true;
            
            // Reset timer display
            document.getElementById('quiz-timer').textContent = '0:00';
            document.getElementById('floating-timer').textContent = '0:00';
            
            // Reset progress
            const progressBar = document.getElementById('quiz-progress-bar');
            const floatingProgressBar = document.getElementById('floating-progress-bar');
            progressBar.style.width = '0%';
            floatingProgressBar.style.width = '0%';
            
            // Update progress text
            document.getElementById('quiz-progress-text').textContent = `0 av ${quizQuestions.length} besvarade`;
            document.getElementById('floating-status').textContent = `0/${quizQuestions.length} besvarade`;
            
            // Render questions
            let questionsHTML = '';
            quizQuestions.forEach((q, i) => {
                questionsHTML += `
                    <div class="question">
                        <h4>${i + 1}. ${q.question}</h4>
                        <div class="options">
                            ${q.options.map((option, j) => `
                                <div class="option" data-question="${i}" onclick="selectQuizAnswer(${i}, ${j}, ${j === q.correctIndex})">
                                    ${option}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            // Update the page
            document.getElementById('quiz-start').style.display = 'none';
            document.getElementById('quiz-result').style.display = 'none';
            document.getElementById('quiz-progress').style.display = 'block';
            document.getElementById('quiz-questions').innerHTML = questionsHTML;
            document.getElementById('quiz-questions').style.display = 'block';
            document.getElementById('quiz-status-floating').style.display = 'block';
            
            // Start the timer
            startTimer();
        }
        
        // Funktion f√∂r att v√§lja svar i quizet
        function selectQuizAnswer(questionIndex, optionIndex, isCorrect) {
            quizAnswers[questionIndex] = {
                selected: optionIndex,
                correct: isCorrect
            };
            
            // Update the selected option's appearance
            const options = document.querySelectorAll(`.option[data-question="${questionIndex}"]`);
            options.forEach(option => {
                option.classList.remove('selected');
            });
            options[optionIndex].classList.add('selected');
            
            updateQuizProgress();
        }
        
        // Funktion f√∂r att uppdatera quizets framsteg
        function updateQuizProgress() {
            const totalQuestions = quizQuestions.length;
            const answered = Object.keys(quizAnswers).length;
            
            // Update progress bar
            const progressBar = document.getElementById('quiz-progress-bar');
            const floatingProgressBar = document.getElementById('floating-progress-bar');
            const progressPercentage = (answered / totalQuestions) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            floatingProgressBar.style.width = `${progressPercentage}%`;
            
            // Update progress text
            document.getElementById('quiz-progress-text').textContent = `${answered} av ${totalQuestions} besvarade`;
            document.getElementById('floating-status').textContent = `${answered}/${totalQuestions} besvarade`;
            
            // Check if quiz is complete
            if (answered === totalQuestions) {
                finishQuiz();
            }
        }
        
        // Funktion f√∂r att starta timer
        function startTimer() {
            if (quizTimerInterval) {
                clearInterval(quizTimerInterval);
            }
            
            quizTimerInterval = setInterval(() => {
                if (!quizInProgress) return;
                
                const currentTime = new Date().getTime();
                const elapsedSeconds = Math.floor((currentTime - quizStartTime) / 1000);
                const minutes = Math.floor(elapsedSeconds / 60);
                const seconds = elapsedSeconds % 60;
                
                const timeDisplay = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                document.getElementById('quiz-timer').textContent = timeDisplay;
                document.getElementById('floating-timer').textContent = timeDisplay;
            }, 500);
        }
        
        // Funktion f√∂r att avsluta quiz
        function finishQuiz() {
            quizInProgress = false;
            clearInterval(quizTimerInterval);
            
            // Hide floating status
            document.getElementById('quiz-status-floating').style.display = 'none';
            
            // Calculate results
            const totalQuestions = quizQuestions.length;
            const answered = Object.keys(quizAnswers).length;
            const correct = Object.values(quizAnswers).filter(a => a.correct).length;
            const score = Math.round((correct / totalQuestions) * 100);
            
            // Calculate time bonus
            const currentTime = new Date().getTime();
            const elapsedSeconds = Math.floor((currentTime - quizStartTime) / 1000);
            
            // Update best time if this is a new record
            if (answered === totalQuestions && (bestTime === null || elapsedSeconds < bestTime)) {
                bestTime = elapsedSeconds;
                localStorage.setItem('quizBestTime', bestTime);
                updateBestTimeDisplay();
            }
            
            // Time bonus calculation (based on completion time)
            const timeBonus = Math.max(0, 300 - elapsedSeconds) * 2; // 2 points for each second under 5 minutes
            
            const totalScore = score + timeBonus;
            
            // Display results
            const resultContainer = document.getElementById('quiz-result');
            resultContainer.innerHTML = `
                <h3>Quiz Resultat</h3>
                <p>Du svarade p√• ${answered} av ${totalQuestions} fr√•gor.</p>
                <p>R√§tta svar: ${correct} (${score}%)</p>
                <p>Tid: ${Math.floor(elapsedSeconds / 60)}:${elapsedSeconds % 60 < 10 ? '0' : ''}${elapsedSeconds % 60}</p>
                <p>Tidsbonus: +${timeBonus} po√§ng</p>
                <p class="result">Din totalpo√§ng: ${totalScore}</p>
                
                ${bestTime === elapsedSeconds && answered === totalQuestions ? 
                  '<p class="time-record">Nytt personligt rekord!</p>' : ''}
                
                <button onclick="startQuiz()">F√∂rs√∂k igen</button>
                <button onclick="showQuizAnswers()">Visa r√§tta svar</button>
            `;
            
            document.getElementById('quiz-questions').style.display = 'none';
            document.getElementById('quiz-start').style.display = 'none';
            document.getElementById('quiz-progress').style.display = 'none';
            resultContainer.style.display = 'block';
            
            // Check for achievements
            checkForAchievements(correct, totalQuestions, elapsedSeconds);
        }
        
        // Funktion f√∂r att visa r√§tta svar
        function showQuizAnswers() {
            let answersHTML = '<h3>R√§tta svar</h3>';
            
            quizQuestions.forEach((q, i) => {
                const userAnswer = quizAnswers[i] ? quizAnswers[i].selected : null;
                const isCorrect = quizAnswers[i] ? quizAnswers[i].correct : false;
                
                answersHTML += `
                    <div class="question">
                        <h4>${i + 1}. ${q.question}</h4>
                        <div class="options">
                            ${q.options.map((option, j) => `
                                <div class="option ${j === q.correctIndex ? 'correct' : ''} ${j === userAnswer && j !== q.correctIndex ? 'wrong' : ''} ${j === userAnswer ? 'selected' : ''}">
                                    ${option} ${j === q.correctIndex ? '‚úì' : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            answersHTML += '<button onclick="document.getElementById(\'quiz-result\').style.display = \'block\'; document.getElementById(\'quiz-answers\').style.display = \'none\';">Tillbaka till resultat</button>';
            
            const answersContainer = document.createElement('div');
            answersContainer.id = 'quiz-answers';
            answersContainer.innerHTML = answersHTML;
            
            document.getElementById('quiz-result').style.display = 'none';
            document.getElementById('quiz').appendChild(answersContainer);
        }
        
        // Funktion f√∂r att kontrollera achievements
        function checkForAchievements(correct, total, time) {
            if (correct === total) {
                unlockAchievement('quiz-master');
            }
            
            if (correct === total) {
                if (time < 60) {
                    unlockAchievement('light-speed');
                    unlockAchievement('lightning');
                    unlockAchievement('speed-demon');
                } else if (time < 120) {
                    unlockAchievement('lightning');
                    unlockAchievement('speed-demon');
                } else if (time < 180) {
                    unlockAchievement('speed-demon');
                }
            }
        }
        
        // Funktion f√∂r att l√•sa upp achievement
        function unlockAchievement(id) {
            const achievement = document.getElementById(id);
            if (achievement && achievement.querySelector('.locked-overlay')) {
                achievement.querySelector('.locked-overlay').style.display = 'none';
                achievement.classList.add('unlocked');
                
                // Save achievement
                const achievementsUnlocked = JSON.parse(localStorage.getItem('achievementsUnlocked') || '[]');
                if (!achievementsUnlocked.includes(id)) {
                    achievementsUnlocked.push(id);
                    localStorage.setItem('achievementsUnlocked', JSON.stringify(achievementsUnlocked));
                    
                    // Show notification
                    showNotification(`Prestation uppl√•st: ${achievement.getAttribute('data-name')}`);
                }
            }
        }
        
        // Funktion f√∂r att visa notifikation
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }
        
        // Funktion f√∂r att ladda prestationer fr√•n localStorage
        function loadAchievements() {
            const achievementsUnlocked = JSON.parse(localStorage.getItem('achievementsUnlocked') || '[]');
            achievementsUnlocked.forEach(id => {
                const achievement = document.getElementById(id);
                if (achievement && achievement.querySelector('.locked-overlay')) {
                    achievement.querySelector('.locked-overlay').style.display = 'none';
                    achievement.classList.add('unlocked');
                }
            });
        }
        
        // Funktion f√∂r att sp√•ra sektionsbes√∂k
        function trackSectionVisit(section) {
            const sectionsVisited = JSON.parse(localStorage.getItem('sectionsVisited') || '[]');
            if (!sectionsVisited.includes(section)) {
                sectionsVisited.push(section);
                localStorage.setItem('sectionsVisited', JSON.stringify(sectionsVisited));
                
                // Check if all content sections have been visited
                const contentSections = ['vetenskap', 'psykisk', 'somn', 'fysisk', 'droger'];
                const allVisited = contentSections.every(s => sectionsVisited.includes(s));
                
                if (allVisited) {
                    unlockAchievement('explorer');
                }
            }
        }
        
        // Initiera sidan n√§r den laddas
        document.addEventListener('DOMContentLoaded', function() {
            // Load best time
            updateBestTimeDisplay();
            
            // Render section questions
            const sections = ['vetenskap', 'psykisk', 'somn', 'fysisk', 'droger'];
            sections.forEach(section => {
                const questionsContainer = document.getElementById(`${section}-questions`);
                if (questionsContainer) {
                    questionsContainer.innerHTML = renderSectionQuestions(section);
                }
            });
            
            // Set up navigation
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active navigation
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding section
                    const sections = document.querySelectorAll('.section');
                    sections.forEach(s => s.classList.remove('active'));
                    
                    const targetSection = this.getAttribute('data-section');
                    document.getElementById(targetSection).classList.add('active', 'animated');
                    
                    // If quiz is in progress and user navigates away, confirm
                    if (quizInProgress && targetSection !== 'quiz') {
                        if (confirm('Vill du avbryta p√•g√•ende quiz? Dina svar kommer att f√∂rloras.')) {
                            finishQuiz();
                        } else {
                            return; // Stay on quiz page
                        }
                    }
                    
                    // Hide quiz floating status if navigating away from quiz
                    if (targetSection !== 'quiz') {
                        document.getElementById('quiz-status-floating').style.display = 'none';
                    }
                    
                    // Track visit for explorer achievement
                    trackSectionVisit(targetSection);
                });
            });
            
            // Load achievements from localStorage
            loadAchievements();
            
            // Add CSS for notification
            const style = document.createElement('style');
            style.textContent = `
                .notification {
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%) translateY(-100px);
                    background-color: #2ecc71;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 5px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                    transition: transform 0.5s ease;
                    z-index: 1000;
                }
                
                .notification.show {
                    transform: translateX(-50%) translateY(0);
                }
                
                .quiz-status-floating {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background-color: var(--dark);
                    color: white;
                    padding: 15px;
                    border-radius: 10px;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                    z-index: 1000;
                    min-width: 180px;
                    opacity: 0.9;
                    transition: opacity 0.3s, transform 0.3s;
                }
                
                .quiz-status-floating:hover {
                    opacity: 1;
                    transform: translateY(-5px);
                }
                
                .quiz-status-floating .timer {
                    font-size: 24px;
                    margin-bottom: 10px;
                    text-align: center;
                }
                
                .mini-progress {
                    height: 8px;
                    background-color: rgba(255, 255, 255, 0.3);
                    border-radius: 4px;
                    overflow: hidden;
                    margin-bottom: 10px;
                }
                
                .mini-progress-bar {
                    height: 100%;
                    background-color: var(--secondary);
                    border-radius: 4px;
                    width: 0;
                    transition: width 0.5s;
                }
                
                .status-text {
                    text-align: center;
                    font-size: 14px;
                }
                
                @media (max-width: 768px) {
                    .quiz-status-floating {
                        bottom: 10px;
                        right: 10px;
                        padding: 10px;
                        min-width: 150px;
                    }
                    
                    .quiz-status-floating .timer {
                        font-size: 20px;
                        margin-bottom: 5px;
                    }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
